# é•¿æ²™æ¥¼å¸‚æŸ¥è¯¢å¹³å°åç«¯API

[![Node.js Version](https://img.shields.io/badge/node-%3E%3D14.0.0-brightgreen.svg)](https://nodejs.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

## ğŸ“– é¡¹ç›®ç®€ä»‹

é•¿æ²™æ¥¼å¸‚æŸ¥è¯¢å¹³å°æ˜¯ä¸€ä¸ªåŸºäºKoa2æ¡†æ¶å¼€å‘çš„ç°ä»£åŒ–Node.jsåç«¯APIæœåŠ¡ï¼Œä¸“é—¨ç”¨äºæŸ¥è¯¢é•¿æ²™åœ°åŒºæ¥¼ç›˜é”€å”®çŠ¶æ€ä¿¡æ¯ã€‚ç”±äºä½å»ºå±€å®˜ç½‘æŸ¥è¯¢ç•Œé¢ç®€é™‹ï¼Œæœ¬é¡¹ç›®æ—¨åœ¨æå‡æŸ¥è¯¢æ•ˆç‡ä¸ç§»åŠ¨ç«¯ä½¿ç”¨ä½“éªŒã€‚

### âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸ—ï¸ **ç°ä»£åŒ–æ¶æ„**: åŸºäºKoa2 + MySQL + Redis + Elasticsearch
- ğŸ•·ï¸ **æ™ºèƒ½çˆ¬è™«**: ä½¿ç”¨request-promise + cheerioè‡ªåŠ¨åŒæ­¥ä½å»ºå±€å®˜ç½‘æ•°æ®
- ğŸ“± **ç§»åŠ¨ç«¯ä¼˜åŒ–**: ä¸“ä¸ºç§»åŠ¨ç«¯æŸ¥è¯¢ä½“éªŒè®¾è®¡
- ğŸ”’ **å®‰å…¨å¯é **: å®Œå–„çš„é”™è¯¯å¤„ç†å’ŒAPIå®‰å…¨æœºåˆ¶
- ğŸ“Š **ç›‘æ§å®Œå–„**: é›†æˆæ—¥å¿—ã€å¼‚å¸¸ã€ä¸šåŠ¡ä¸æ€§èƒ½ç›‘æ§
- ğŸš€ **é«˜æ€§èƒ½**: æ”¯æŒç¼“å­˜ã€è¿æ¥æ± ã€å‹ç¼©ç­‰ä¼˜åŒ–

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æ¡†æ¶
- **Koa2**: è½»é‡çº§Node.js Webæ¡†æ¶
- **Sequelize**: ORMæ•°æ®åº“æ“ä½œ
- **MySQL2**: MySQLæ•°æ®åº“é©±åŠ¨
- **Redis**: ç¼“å­˜æ•°æ®åº“
- **Elasticsearch**: æœç´¢å¼•æ“

### å¼€å‘å·¥å…·
- **ESLint + Prettier**: ä»£ç è§„èŒƒå’Œæ ¼å¼åŒ–
- **Nodemon**: å¼€å‘çƒ­é‡è½½

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 14.0.0
- MySQL >= 5.7
- Redis >= 4.0
- Elasticsearch >= 7.0

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/yu1596882018/changshaHouse.git
cd changshaHouse
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **ç¯å¢ƒé…ç½®**
```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
cp .env.example .env
```

4. **å¯åŠ¨æœåŠ¡**
```bash
# å¼€å‘ç¯å¢ƒ
npm run dev

# ç”Ÿäº§ç¯å¢ƒ
npm run start
```

## ğŸ“š APIæ–‡æ¡£

### åŸºç¡€ä¿¡æ¯

- **Base URL**: `http://localhost:8899/api/v1`
- **Content-Type**: `application/json`

### ä¸»è¦æ¥å£

#### 1. æ¥¼ç›˜ä¿¡æ¯æŸ¥è¯¢
```http
GET /api/v1/houses
```

#### 2. éªŒè¯ç è·å–
```http
GET /api/v1/captcha
```

#### 3. æˆ¿æºè¯¦æƒ…æŸ¥è¯¢
```http
POST /api/v1/houses/verify
```

## ğŸš€ éƒ¨ç½²

### PM2éƒ¨ç½²ï¼ˆæ¨èï¼‰
```bash
npm run prod
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ controllers/     # æ§åˆ¶å™¨å±‚
â”œâ”€â”€ middlewares/     # ä¸­é—´ä»¶
â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”œâ”€â”€ routers/         # è·¯ç”±å®šä¹‰
â”œâ”€â”€ scripts/         # çˆ¬è™«è„šæœ¬
â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”œâ”€â”€ app.js           # åº”ç”¨å…¥å£
â””â”€â”€ main.js          # æœåŠ¡å¯åŠ¨
```